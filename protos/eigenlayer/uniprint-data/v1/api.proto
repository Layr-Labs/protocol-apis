syntax = "proto3";

package eigenlayer.uniprint_data.api.v1;

option go_package = "github.com/Layr-Labs/uniprint_data/protos/eigenlayer/api/v1";

import "google/api/annotations.proto";
import "buf/validate/validate.proto";

message ManifestSignature {
  bytes v = 1;
  bytes r = 2;
  bytes s = 3;
}

message RewardAmount {
  string recipient_address = 1;
  string amount = 2;
}

message Manifest {
  repeated RewardAmount rewards = 1 [(buf.validate.field).repeated = { min_items: 100000; }];
}

message UploadManifestRequest {
  string avs_address = 1;
  string erc20_token_address = 2;
  Manifest manifest = 3;
}

message UploadManifestResponse {
  string content_hash = 1;
  string content_uri = 2;
  string verification_hash = 3;
  ManifestSignature signature = 4;
}

service Api {
  rpc UploadManifest(UploadManifestRequest) returns (UploadManifestResponse) {
    option (google.api.http) = {
      post: "/v1/manifests"
      body: "*"
    };
  }
}
